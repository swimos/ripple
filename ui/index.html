<!DOCTYPE html>
<html style="height: 100%; overflow: hidden;">
  <head>
    <title>Ripple</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no, viewport-fit=cover"/>
    <link rel="icon" href="assets/nstream-favicon.ico" />
  </head>
  <body style="width: 100%; height: 100%; margin: 0; overflow: auto; background-color: #040e19">
    <script src="libs/swim-core.min.js"></script>
    <script src="libs/swim-host.min.js"></script>
    <script src="libs/swim-ui.min.js"></script>
    <script src="libs/swim-ux.min.js"></script>
    <script src="libs/swim-vis.min.js"></script>
    <script src="libs/swim-maps.min.js"></script>
    <script src="libs/nstream-gui.min.js"></script>
    <script src="libs/ripple-demo.min.js"></script>
    <script>

if (navigator.standalone) {
  document.documentElement.style.width = "100vw";
  document.documentElement.style.height = "100vh";
} else {
  document.documentElement.style.width = "100%";
  document.documentElement.style.height = "100%";
}
document.body.style.position = "fixed";
document.body.style.margin = "0";
document.body.style.overflow = "hidden";
document.body.style.backgroundColor = "#212121";
if (navigator.standalone) {
  document.body.style.width = "100vw";
  document.body.style.height = "100vh";
} else {
  document.body.style.width = "100%";
  document.body.style.height = "100%";
}

// var app = new swim.HtmlAppView(document.getElementById("app"));

// var canvas = app.append("canvas");

// var mirror = new swim.MirrorView();
// mirror.captive = true;

// var documentUri = swim.Uri.parse(document.location.href);
// var host = documentUri.query().get("host");
// var room = documentUri.fragmentIdentifier() || "wall";

// var hostUri = host || "warp://localhost:9001";
// var nodeUri = swim.UriPath.from("mirror", room).toString();
// var nodeRef = swim.client.nodeRef(hostUri, nodeUri);
// var mirrorController = new swim.SwimMirrorViewController(nodeRef);
// mirror.setViewController(mirrorController);
// mirror.captive = true;

// canvas.append(mirror);



const bodyView = swim.HtmlView.fromNode(document.body).set({
  style: {
    boxSizing: 'border-box',
    margin: 0,
  }
});
console.log('bodyView: ', bodyView);

// create root controller
const appController = new swim.rippleDemo.AppController();

// insert sheet view of root controller into body view
appController.sheet.insertView(bodyView).set({
  style: {
    width: '100%',
    height: '100%',
    minWidth: '100%',
    minHeight: '100%',
  },
});

const mirrorController = appController.mirrorController.attachController();
const mirrorPanelView = mirrorController.panel.insertView(appController.sheet.attachView());
console.log('mirrorPanelView: ', mirrorPanelView);
console.log('mirrorController: ', mirrorController);
appController.appendChild(mirrorController);

console.log('appController: ', appController);
    </script>
  </body>
</html>
